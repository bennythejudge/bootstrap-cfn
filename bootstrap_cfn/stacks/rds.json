{
  "RDSSubnetGroup" : {
    "Type" : "AWS::RDS::DBSubnetGroup",
    "Properties" : {
      "DBSubnetGroupDescription" : "VPC Subnets",
      "SubnetIds" : [{ "Ref" : "SubnetA" }, { "Ref" : "SubnetB" }, { "Ref" : "SubnetC" }]
    }
  },
  "DBSecurityGroup": {
    "Type": "AWS::RDS::DBSecurityGroup",
    "Properties": {
      "GroupDescription": "EC2 Access",
      "EC2VpcId" : { "Ref" : "VPC" },
      "DBSecurityGroupIngress": [
        {
          "CIDRIP": { "Fn::FindInMap" : [ "SubnetConfig", "VPC", "CIDR" ]}
        }
      ]
    }
  },
  "RDSInstance": {
    "DependsOn" : "DBSecurityGroup",
    "Type": "AWS::RDS::DBInstance",
    "Properties": {
      "DBInstanceIdentifier": "",
      "DBName": "",
      "DBInstanceClass": "",
      "MasterUsername": "",
      "MasterUserPassword": "",
      "AllocatedStorage": "",
      "StorageType": "",
      "Engine": "",
      "EngineVersion": "",
      "MultiAZ": "",
      "DBSubnetGroupName": {"Ref" : "RDSSubnetGroup"},
      "DBSecurityGroups": [{"Ref" : "DBSecurityGroup"}],
      "PubliclyAccessible": false,
      "AllowMajorVersionUpgrade": false,
      "AutoMinorVersionUpgrade": false
    }
  }
}